<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kiyaro Countdown . . .</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üïí</text></svg>">
  <style>
    :root {
      --bg: #0f1226;
      --card: #14183a;
      --accent: #7c5cff;
      --accent-2: #00e0b8;
      --text: #e6e9ff;
      --muted: #b9c0ff;
      --danger: #ff6b6b;
      --shadow: 0 20px 45px rgba(0,0,0,.35);
      --radius: 20px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 800px at 20% 10%, #15183a 0%, #0f1226 60%, #0c0f20 100%);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: min(920px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      height: 74vh;
      display: flex;
      flex-direction: column;
    }
    main {
      flex: 1;
      overflow-y: auto;
      padding: 16px 20px;
    }
    header {
      padding: 18px 24px 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      background: linear-gradient(135deg, rgba(124,92,255,.18), rgba(0,224,184,.12));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .title {
      display: flex;
      align-items: center;
      gap: 14px;
      font-weight: 700;
      letter-spacing: .3px;
      font-size: 2rem;
      font-style: oblique;
    }
    #liveClock {
      font-weight: 700;
      font-size: 31px;
      color: #e6e9ff;
      background: rgba(255,255,255,.08);
      padding: 10px 16px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.15);
      text-align: center;
      min-width: 175px;
    }
    nav {
      display: flex;
      gap: 20px;
      padding: 16px 24px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(135deg, rgba(124,92,255,.08), rgba(0,224,184,.05));
    }
    nav .btn {
      flex: 1;
      cursor: pointer;
      padding: 10px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      border-radius: 12px;
      color: var(--text);
    }
    nav .btn.active {
      background: linear-gradient(135deg, rgba(124,92,255,.35), rgba(0,224,184,.25));
      border-color: rgba(124,92,255,.6);
    }
  
    .controls { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    .btn, .input {
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding: 10px 14px;
      font-size: 14px;
      backdrop-filter: blur(6px);
    }

    /* To-Do List Styling */
.task-list {
  list-style: none;
  margin-top: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 400px;
  overflow-y: auto;
  padding-right: 4px;
}

.task-list li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,.1);
  padding: 12px 16px;
  border-radius: 16px;
  font-size: 15px;
  transition: transform 0.2s, background 0.2s;
}

.task-list li:hover {
  transform: translateY(-2px);
  background: rgba(124,92,255,0.1);
}

.task-list li.completed {
  text-decoration: line-through;
  opacity: 0.6;
}

.task-list li .task-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.task-list li .task-left input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--accent);
  cursor: pointer;
}

.task-list li button {
  background: rgba(255,107,107,0.2);
  border: none;
  padding: 6px 10px;
  border-radius: 12px;
  cursor: pointer;
  font-size: 13px;
  transition: background 0.2s;
}

.task-list li button:hover {
  background: rgba(255,107,107,0.4);
}


    /* Stopwatch Styling */
    #stopwatchDisplay {
      font-size: clamp(28px, 8vw, 64px); /* responsive font size */
      font-weight: bold;
      text-align: center;
      margin: 18px 0;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255,255,255,.1);
      padding: 15px 20px;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #stopwatchSection {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #stopwatchSection button {
      min-width: 120px;
      font-size: 16px;
    }

    .btn.primary { border-color: rgba(124,92,255,.6); background: linear-gradient(135deg, rgba(124,92,255,.35), rgba(0,224,184,.25)); }
    .btn.danger { border-color: rgba(255,107,107,.5); background: linear-gradient(135deg, rgba(255,107,107,.35), rgba(255,107,107,.15)); }
    .timer { display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px; margin: 20px 0 14px; }
    .tile { background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border: 1px solid rgba(255,255,255,.1); border-radius: 18px; padding: 18px; text-align: center; }
    .tile h2 { margin: 0; font-size: clamp(34px, 5vw, 56px); line-height: 1; letter-spacing: 1px; }
    .tile p { margin: 6px 0 0; color: var(--muted); font-size: 13px; letter-spacing: .4px; }
    .progress { margin-top: 18px; background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.1); height: 14px; border-radius: 999px; overflow: hidden; position: relative; }
    .bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .6s; }
    .progress span { position: absolute; inset: 0; display: grid; place-items: center; font-size: 12px; }
    .badges { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 14px; }
    .badge { font-size: 12px; background: rgba(255,255,255,.06); padding: 6px 10px; border: 1px solid rgba(255,255,255,.1); border-radius: 999px; }
    footer { padding: 16px 20px; color: var(--muted); font-size: 12px; text-align: center; border-top: 1px solid rgba(255,255,255,.08); }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <div class="title"><span class="emoji">‚è≥</span> <span>Kiyaro</span></div>
        <div id="status" class="subtitle" aria-live="polite">Tick Tock, Count Time Your Way.</div>
      </div>
      <div id="liveClock">00:00:00</div>
    </header>

    <nav>
      <button class="btn active" data-page="timer">Timer</button>
      <button class="btn" data-page="todo">To Do List</button>
      <button class="btn" data-page="stopwatch">Stopwatch</button>
    </nav>

    <main>
      <!-- Timer Section -->
      <section id="timerSection" class="active">
        <div class="controls">
          <input class="input" type="date" id="fromDate" />
          <input class="input" type="date" id="toDate" />
          <button class="btn primary" id="startBtn">Start Countdown</button>
          <button class="btn danger" id="reset">Reset</button>
        </div>
        <div class="timer">
          <div class="tile"><h2 id="days">0</h2><p>Days</p></div>
          <div class="tile"><h2 id="hours">00</h2><p>Hours</p></div>
          <div class="tile"><h2 id="minutes">00</h2><p>Minutes</p></div>
          <div class="tile"><h2 id="seconds">00</h2><p>Seconds</p></div>
        </div>
        <div class="big-date">Ends on: <strong id="endDate">‚Äî</strong></div>
        <div class="progress">
          <div class="bar" id="bar"></div>
          <span id="percent">0%</span>
        </div>
        <div class="badges">
          <div class="badge" id="elapsedBadge">Elapsed: 0 days</div>
          <div class="badge" id="remainingBadge">Remaining: 0 days</div>
        </div>
      </section>

      <!-- To-Do Section -->
      <section id="todoSection">
        <h2>To-Do List</h2>
        <div class="controls">
            <input class="input" id="taskInput" placeholder="Add a new task" />
            <button class="btn primary" id="addTask">Add</button>
        </div>
        <ul id="taskList" class="task-list"></ul>
      </section>


      <!-- Stopwatch Section -->
      <section id="stopwatchSection">
        <h2>Stopwatch</h2>
        <div id="stopwatchDisplay">00:00:00</div>
        <button class="btn primary" id="startStopwatch">Start</button>
        <button class="btn danger" id="resetStopwatch">Reset</button>
      </section>
    </main>

    <footer>Tip: choose both dates to start your countdown.</footer>
  </div>

<script>
  let countdown;
  const DAY = 24 * 60 * 60 * 1000;
  const pad = n => String(n).padStart(2, '0');

  const el = {
    days: document.getElementById('days'),
    hours: document.getElementById('hours'),
    minutes: document.getElementById('minutes'),
    seconds: document.getElementById('seconds'),
    endDate: document.getElementById('endDate'),
    bar: document.getElementById('bar'),
    percent: document.getElementById('percent'),
    status: document.getElementById('status'),
    elapsedBadge: document.getElementById('elapsedBadge'),
    remainingBadge: document.getElementById('remainingBadge')
  };

  function tick(fromDate, toDate){
    const now = new Date();
    const diff = toDate - now;
    const elapsed = now - fromDate;
    const total = toDate - fromDate;

    if(diff <= 0){
      clearInterval(countdown);
      el.status.textContent = "üéâ Countdown Complete!";
      el.days.textContent = 0;
      el.hours.textContent = "00";
      el.minutes.textContent = "00";
      el.seconds.textContent = "00";
      el.bar.style.width = "100%";
      el.percent.textContent = "100%";
      return;
    }

    const days = Math.floor(diff / DAY);
    const hours = Math.floor((diff % DAY) / (1000*60*60));
    const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
    const seconds = Math.floor((diff % (1000*60)) / 1000);

    el.days.textContent = days;
    el.hours.textContent = pad(hours);
    el.minutes.textContent = pad(minutes);
    el.seconds.textContent = pad(seconds);
    el.endDate.textContent = toDate.toLocaleString();

    const pct = Math.min(100, (elapsed / total) * 100);
    el.bar.style.width = pct.toFixed(2) + '%';
    el.percent.textContent = pct.toFixed(1) + '%';
    el.elapsedBadge.textContent = `Elapsed: ${Math.floor(elapsed / DAY)} days`;
    el.remainingBadge.textContent = `Remaining: ${days} days`;
    el.status.textContent = "Counting down‚Ä¶";
  }

  // Auto-setup countdown for 31 Jan 23:59
  function startAutoCountdown(){
    clearInterval(countdown);
    const now = new Date();
    let year = now.getFullYear();
    let toDate = new Date(year, 0, 31, 23, 59, 59);
    if(now > toDate){
      year++;
      toDate = new Date(year, 0, 31, 23, 59, 59);
    }
    const fromDate = now;
    tick(fromDate, toDate);
    countdown = setInterval(() => tick(fromDate, toDate), 1000);
  }
  startAutoCountdown();

  // Live Clock
  function updateClock() {
    const now = new Date();
    document.getElementById('liveClock').textContent = 
      `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
  }
  setInterval(updateClock, 1000);
  updateClock();

  // Navigation
  document.querySelectorAll("nav .btn").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll("nav .btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      document.querySelectorAll("main section").forEach(sec => sec.style.display = "none");
      const target = document.getElementById(btn.dataset.page + "Section");
      if (target) target.style.display = "block";
    });
  });
  document.querySelectorAll("main section").forEach(sec => sec.style.display = "none");
  document.getElementById("timerSection").style.display = "block";

  /* ==========================
     TO-DO LIST FUNCTIONALITY
  ========================== */
  const taskInput = document.getElementById("taskInput");
  const addTaskBtn = document.getElementById("addTask");
  const taskList = document.getElementById("taskList");

  function saveTasks(){
  const tasks = [...taskList.querySelectorAll("li")].map(li => {
    return {
      text: li.querySelector("span").textContent.trim(),
      completed: li.classList.contains("completed")
    };
  });
  localStorage.setItem("tasks", JSON.stringify(tasks));
}

function loadTasks(){
  const tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
  tasks.forEach(task => addTask(task.text, task.completed));
}

function addTask(text, completed = false){
  const li = document.createElement("li");

  const taskLeft = document.createElement("div");
  taskLeft.className = "task-left";

  const checkbox = document.createElement("input");
  checkbox.type = "checkbox";
  checkbox.checked = completed;
  if(completed) li.classList.add("completed");

  checkbox.addEventListener("change", () => {
    if(checkbox.checked) li.classList.add("completed");
    else li.classList.remove("completed");
    saveTasks();  // save state whenever checkbox changes
  });

  const span = document.createElement("span");
  span.textContent = text;

  taskLeft.appendChild(checkbox);
  taskLeft.appendChild(span);
  li.appendChild(taskLeft);

  const delBtn = document.createElement("button");
  delBtn.textContent = "‚ùå";
  delBtn.addEventListener("click", () => { li.remove(); saveTasks(); });
  li.appendChild(delBtn);

  taskList.appendChild(li);
}


  addTaskBtn.addEventListener("click", () => {
    const taskText = taskInput.value.trim();
    if(taskText === "") return;
    addTask(taskText);
    taskInput.value = "";
    saveTasks();
  });
  taskInput.addEventListener("keydown", (e) => {
    if(e.key === "Enter") addTaskBtn.click();
  });
  loadTasks();

  /* ==========================
     STOPWATCH FUNCTIONALITY
  ========================== */
  let stopwatchInterval;
  let elapsedTime = 0;
  let running = false;
  const stopwatchDisplay = document.getElementById("stopwatchDisplay");
  const startStopwatchBtn = document.getElementById("startStopwatch");
  const resetStopwatchBtn = document.getElementById("resetStopwatch");

  function formatTime(ms){
    let totalSeconds = Math.floor(ms / 1000);
    let hours = pad(Math.floor(totalSeconds / 3600));
    let minutes = pad(Math.floor((totalSeconds % 3600) / 60));
    let seconds = pad(totalSeconds % 60);
    return `${hours}:${minutes}:${seconds}`;
  }
  function updateStopwatch(){
    stopwatchDisplay.textContent = formatTime(elapsedTime);
  }

  function saveStopwatchState(){
    localStorage.setItem("stopwatch", JSON.stringify({ elapsedTime, running }));
  }
  function loadStopwatchState(){
    const state = JSON.parse(localStorage.getItem("stopwatch") || "{}");
    if(state.elapsedTime) elapsedTime = state.elapsedTime;
    if(state.running){
      startStopwatchBtn.click(); // auto start
    } else {
      updateStopwatch();
    }
  }

  startStopwatchBtn.addEventListener("click", () => {
    if(!running){
      running = true;
      startStopwatchBtn.textContent = "Pause";
      const startTime = Date.now() - elapsedTime;
      stopwatchInterval = setInterval(() => {
        elapsedTime = Date.now() - startTime;
        updateStopwatch();
        saveStopwatchState();
      }, 100);
    } else {
      running = false;
      startStopwatchBtn.textContent = "Start";
      clearInterval(stopwatchInterval);
      saveStopwatchState();
    }
  });
  resetStopwatchBtn.addEventListener("click", () => {
    running = false;
    clearInterval(stopwatchInterval);
    elapsedTime =0;
    updateStopwatch();
    startStopwatchBtn.textContent = "Start";
    saveStopwatchState();
  });

  // Load stopwatch state on page load
  loadStopwatchState();

  /* ==========================
     TIMER START/RESET HANDLERS
  ========================== */
  const fromDateInput = document.getElementById("fromDate");
  const toDateInput = document.getElementById("toDate");
  const startBtn = document.getElementById("startBtn");
  const resetBtn = document.getElementById("reset");

  startBtn.addEventListener("click", () => {
    const from = new Date(fromDateInput.value);
    const to = new Date(toDateInput.value);
    if(isNaN(from) || isNaN(to) || from >= to){
      alert("Please select valid dates!");
      return;
    }
    clearInterval(countdown);
    tick(from, to);
    countdown = setInterval(() => tick(from, to), 1000);
  });

  resetBtn.addEventListener("click", () => {
    clearInterval(countdown);
    startAutoCountdown();
    fromDateInput.value = "";
    toDateInput.value = "";
  });

  /* ==========================
     MOBILE RESPONSIVENESS
  ========================== */
  // Already mostly responsive via flex/grid + clamp() fonts
  // Additional tweak: stack nav buttons on very small screens
  const mediaQuery = window.matchMedia("(max-width: 600px)");
  function handleSmallScreen(e){
    if(e.matches){
      document.querySelector("nav").style.flexDirection = "column";
    } else {
      document.querySelector("nav").style.flexDirection = "row";
    }
  }
  mediaQuery.addListener(handleSmallScreen);
  handleSmallScreen(mediaQuery);

</script>
</body>
</html>
